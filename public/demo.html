<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wishlist Dock - Embedding Demo</title>

    <!-- Host website styles that SHOULD NOT affect the widget -->
    <style>
        /* These styles demonstrate conflicts that Shadow DOM prevents */
        * {
            box-sizing: content-box !important;
            font-family: 'Comic Sans MS', cursive !important;
        }

        body {
            background: linear-gradient(45deg, #ff0000, #00ff00, #0000ff);
            margin: 40px;
            font-size: 24px;
        }

        /* These would normally break the widget */
        button {
            background: #ff0000 !important;
            border: 5px solid #ffff00 !important;
            font-size: 10px !important;
            padding: 50px !important;
        }

        .text-white {
            color: #ff00ff !important;
        }

        .px-4 {
            padding: 100px !important;
        }

        .bg-slate-900 {
            background: #orange !important;
        }

        h1 {
            text-align: center;
            color: #fff;
            text-shadow: 3px 3px 3px #000;
            margin-bottom: 40px;
        }

        .demo-section {
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid #fff;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid #fff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1000;
        }

        .info-box {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #fff;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: #fff;
        }

        .widget-container {
            position: relative;
            height: 400px;
            border: 3px dashed #fff;
            border-radius: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <h1>üöÄ Wishlist Dock Widget - Embedding Demo</h1>

    <button class="theme-toggle" onclick="toggleTheme()">üåì Toggle Theme</button>

    <div class="demo-section">
        <h2>üìñ What This Demo Shows</h2>
        <div class="info-box">
            <p><strong>Shadow DOM Isolation:</strong> The widget below is completely isolated from this page's styles.</p>
            <p><strong>No CSS Conflicts:</strong> Despite the aggressive CSS rules on this page (red backgrounds, giant padding, Comic Sans), the widget renders correctly.</p>
            <p><strong>Theme Support:</strong> Use the toggle button to switch between light/dark themes.</p>
        </div>
    </div>

    <div class="demo-section">
        <h2>üéØ Embedding Examples</h2>

        <!-- Light Theme Widget -->
        <div style="margin-bottom: 40px;">
            <h3 style="color: #fff; margin-bottom: 20px;">Light Theme Widget:</h3>
            <div class="widget-container">
                <p>Light theme widget will appear here</p>
            </div>
        </div>

        <!-- Dark Theme Widget -->
        <div style="margin-bottom: 40px;">
            <h3 style="color: #fff; margin-bottom: 20px;">Dark Theme Widget:</h3>
            <div class="widget-container">
                <p>Dark theme widget will appear here</p>
            </div>
        </div>

        <!-- Multiple Widgets -->
        <div>
            <h3 style="color: #fff; margin-bottom: 20px;">Multiple Widgets (Independent State):</h3>
            <div style="display: flex; gap: 20px; justify-content: space-around;">
                <div class="widget-container" style="flex: 1;">
                    <p>Widget 1 will appear here</p>
                </div>
                <div class="widget-container" style="flex: 1;">
                    <p>Widget 2 will appear here</p>
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üîß How to Embed</h2>
        <div class="info-box">
            <h3>Method 1: Script Tag (Easiest)</h3>
            <pre style="background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; overflow-x: auto;">
&lt;script type="module" src="https://your-cdn.com/wishlist-dock.es.js"&gt;&lt;/script&gt;
&lt;wishlist-dock data-theme="dark"&gt;&lt;/wishlist-dock&gt;</pre>

            <h3>Method 2: Dynamic Loading</h3>
            <pre style="background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; overflow-x: auto;">
&lt;script&gt;
  (function() {
    const script = document.createElement('script');
    script.type = 'module';
    script.src = 'https://your-cdn.com/wishlist-dock.es.js';
    document.head.appendChild(script);

    script.onload = function() {
      const widget = document.createElement('wishlist-dock');
      widget.setAttribute('data-theme', 'light');
      document.body.appendChild(widget);
    };
  })();
&lt;/script&gt;</pre>
        </div>
    </div>

    <!-- Load the widget in development -->
    <script type="module">
        // Import and register the web component
        import('/src/index-web-component.ts').then(() => {
            console.log('‚úÖ Wishlist Dock widget loaded');

            // Create light theme widget
            const lightWidget = document.createElement('wishlist-dock');
            lightWidget.setAttribute('data-theme', 'light');
            document.querySelectorAll('.widget-container')[0].innerHTML = '';
            document.querySelectorAll('.widget-container')[0].appendChild(lightWidget);

            // Create dark theme widget
            const darkWidget = document.createElement('wishlist-dock');
            darkWidget.setAttribute('data-theme', 'dark');
            document.querySelectorAll('.widget-container')[1].innerHTML = '';
            document.querySelectorAll('.widget-container')[1].appendChild(darkWidget);

            // Create multiple widgets with independent state
            const widget1 = document.createElement('wishlist-dock');
            widget1.setAttribute('data-theme', 'dark');
            document.querySelectorAll('.widget-container')[2].innerHTML = '';
            document.querySelectorAll('.widget-container')[2].appendChild(widget1);

            const widget2 = document.createElement('wishlist-dock');
            widget2.setAttribute('data-theme', 'light');
            document.querySelectorAll('.widget-container')[3].innerHTML = '';
            document.querySelectorAll('.widget-container')[3].appendChild(widget2);

        }).catch(err => {
            console.error('‚ùå Failed to load widget:', err);
            document.querySelectorAll('.widget-container').forEach((el, i) => {
                el.innerHTML = `<p style="color: #ff6b6b;">‚ùå Failed to load widget #${i + 1}</p>`;
            });
        });

        // Theme toggle functionality
        function toggleTheme() {
            const widgets = document.querySelectorAll('wishlist-dock');
            widgets.forEach(widget => {
                const currentTheme = widget.getAttribute('data-theme');
                widget.setAttribute('data-theme', currentTheme === 'dark' ? 'light' : 'dark');
            });
        }

        // Make toggleTheme globally available
        window.toggleTheme = toggleTheme;
    </script>
</body>
</html>